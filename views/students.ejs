<%- include("./partials/head.ejs") %>
  <%- include("./partials/header.ejs") %>

    <section class="container">
      <div class="row">
        <div class="col s6">
          <p>Inicio > Escolas > <b>Alunos</b></p>
          <h1 class="text-medium">
            <%= students[0].school_name %>
          </h1>
          <h2 class="text-bold blue-grey-text">Ajude a encher a mochila de:</h2>
        </div>
        <div class="col s6">

          <div class="city-search-bar grey lighten-1 my">
            <input placeholder="Digite o nome da sua cidade..." id="city-autocomplete" type="text">
            <button id="search-button" class="btn waves-effect waves-light" type="submit" name="action">
              <i class="material-icons">search</i>
            </button>
          </div>

        </div>
      </div>

      <div class="row my">
        <% students.forEach((student)=> { %>
          <%- include("./components/student-card.ejs", {student: student}) %>
            <% }); %>
      </div>
    </section>


    <!--Modal-->

    <% materials.forEach((materialList)=> { %>
      <div id="<%= materialList.id %>" class="modal modal-fixed-footer">
        <div id="modal-content" class="modal-content">
          <h2 class="text-bold blue-grey-text">Lista de Materiais</h2>
          <div class="materials-list">
            <ul class="collection">
              <% if (materialList.products_list.length) { %>
                <% materialList.products_list.forEach((material)=> { %>
                  <li id="<%= material.Codigo %>" onclick="select('<%= material.Codigo %>')"
                    class="collection-item avatar">

                    <img src="<%= material.image %>" alt="" class="circle">
                    <h6><b>
                        <%= material.Grupo %>
                      </b></h6>

                    <label class="secondary-content">
                      <input id="input_<%= material.Codigo %>" type="checkbox"
                        onclick="event.stopImmediatePropagation();" name="<%= material.Codigo %>" autocomplete="off" />
                      <span></span>
                    </label>
                  </li>
                  <% }) %>
                    <% } %>
            </ul>
          </div>
        </div>
        <div class="modal-footer">
          <div class="buttons center-align">
            <a href="#" class="modal-close waves-effect waves-light btn-flat">Cancelar</a>
            <a href="#" id="<%= materialList.id %>" onclick="modalEffect('<%= materialList.id %>')"
              class="donate-button waves-effect waves-light btn ambar">Doar materiais</a>
          </div>
        </div>
      </div>

      <% }); %>

            <div class="modal-content-new">
              <h4 class="text-bold blue-grey-text">Agradecemos sua contribuição!</h4>
              <img src="/assets/thanks-mochi.png" alt="Thank you!">
            </div>
            <div class="modal-footer">
              <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
            </div>

        <script>
          const donateButton = document.querySelector('.donate-button');
          const modalContent = document.querySelector('.modal-content');

          donateButton.addEventListener('click', function () {
          modalContent.textContent='Agradecemos sua contribuição!';
          })  

          /*
            modalContent.hide();
            newContent.show();
          }) */
        </script>

        <%- include("./partials/footer.ejs") %>